cmake_minimum_required(VERSION 3.25)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)

set(WEBVIEW_VER "1.0.1661.34")
set(CPPWINRT_VER "2.0.230225.1")
set(WIL_VER "1.0.230202.1")
set(LIBS ${CMAKE_SOURCE_DIR}/build/libs/)

project(Gooey VERSION 0.0.1 LANGUAGES CXX)

math(EXPR BITNESS "${CMAKE_SIZEOF_VOID_P} * 8" OUTPUT_FORMAT DECIMAL)
message(STATUS "C++${CMAKE_CXX_STANDARD}, CMake ${CMAKE_VERSION}, ${CMAKE_GENERATOR}, ${CMAKE_CXX_COMPILER_ID} ${CMAKE_CXX_COMPILER_VERSION}")
message(STATUS "${PROJECT_NAME} (${BITNESS}-bit) [${CMAKE_BUILD_TYPE}] v${PROJECT_VERSION}")

add_executable(${PROJECT_NAME} WIN32 ${CMAKE_CURRENT_SOURCE_DIR}/src/gooey.cpp ${CMAKE_CURRENT_SOURCE_DIR}/src/gooey.rc)

target_precompile_headers(${PROJECT_NAME} PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/src/pch.hpp)

target_include_directories(${PROJECT_NAME} PUBLIC ${LIBS})
target_link_libraries(${PROJECT_NAME} ${LIBS}/WebView2LoaderStatic.lib)
target_link_libraries(${PROJECT_NAME} dwmapi.lib)
